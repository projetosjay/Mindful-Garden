<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Garden</title>
    <style>
        /* Estilos CSS aqui (mantidos conforme o original) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #4ade80;
            --secondary-green: #22c55e;
            --light-green: #dcfce7;
            --dark-green: #16a34a;
            --accent-green: #86efac;
            --white: #ffffff;
            --light-gray: #f8fafc;
            --gray: #64748b;
            --dark-gray: #334155;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--light-green) 0%, var(--white) 100%);
            min-height: 100vh;
            color: var(--dark-gray);
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--white);
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid var(--light-green);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-green);
        }

        .user-profile {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--light-green);
            border-radius: 12px;
            text-align: center;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            background: var(--primary-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 0.5rem;
            color: white;
        }

        .nav-menu {
            flex: 1;
            padding: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .nav-item:hover {
            background: var(--light-green);
            transform: translateX(4px);
        }

        .nav-item.active {
            background: var(--primary-green);
            color: white;
        }

        .nav-item.active:hover {
            background: var(--secondary-green);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-bar {
            background: var(--white);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--light-gray);
            border-radius: 25px;
            padding: 0.5rem 1rem;
            gap: 0.5rem;
            flex: 1;
            max-width: 400px;
        }

        .search-bar input {
            border: none;
            background: none;
            outline: none;
            flex: 1;
            font-size: 0.875rem;
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            border: 1px solid var(--light-green);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark-green);
        }

        /* Garden Page */
        .garden-grid {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }

        .plant-container {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--light-green), rgba(255,255,255,0.5));
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .plant-stage {
            width: 200px;
            height: 200px;
            margin: 0 auto 1rem;
            background: var(--accent-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            transition: all 0.5s ease;
            box-shadow: var(--shadow-lg);
            position: relative;
        }

        .plant-stage::before {
            content: '';
            position: absolute;
            inset: -10px;
            background: conic-gradient(var(--primary-green), var(--secondary-green), var(--primary-green));
            border-radius: 50%;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .plant-stage.thriving::before {
            opacity: 1;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .plant-info {
            display: grid;
            gap: 1rem;
        }

        .plant-stat {
            background: var(--white);
            padding: 1rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .stat-bar {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-green), var(--secondary-green));
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .care-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .care-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }

        .care-btn:hover {
            background: var(--secondary-green);
            transform: translateY(-2px);
        }

        .care-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        .care-btn.locked {
            background: var(--light-gray);
            color: var(--gray);
        }

        /* Emergency Contacts */
        .emergency-card {
            background: var(--white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 2px solid var(--primary-green);
            margin-top: 2rem;
        }

        .emergency-title {
            color: var(--dark-green);
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
            text-align: center;
        }

        .emergency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .emergency-item {
            background: var(--light-green);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .emergency-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .emergency-name {
            font-weight: 600;
            color: var(--dark-green);
            margin-bottom: 0.5rem;
        }

        .emergency-phone {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--secondary-green);
        }

        /* Daily Phrase Modal */
        .daily-phrase-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }

        .daily-phrase-content {
            background: var(--white);
            border-radius: 20px;
            padding: 2.5rem;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-lg);
            text-align: center;
            position: relative;
        }

        .daily-phrase-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .daily-phrase-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-green);
        }

        .daily-phrase-text {
            font-size: 1.25rem;
            font-style: italic;
            margin-bottom: 2rem;
            color: var(--dark-gray);
        }

        .daily-phrase-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .daily-phrase-btn:hover {
            background: var(--secondary-green);
            transform: translateY(-2px);
        }

        /* Mobile Responsive */
        .mobile-toggle {
            display: none;
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
                z-index: 1000;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-toggle {
                display: block;
            }

            .app-container {
                display: block;
            }

            .main-content {
                margin-left: 0;
            }

            .garden-grid {
                grid-template-columns: 1fr;
            }

            .communities-grid {
                grid-template-columns: 1fr;
            }

            .content-area {
                padding: 1rem;
            }

            .care-actions {
                grid-template-columns: 1fr;
            }
        }

        /* Login Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow-lg);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--light-green);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus {
            border-color: var(--primary-green);
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
            transition: background 0.2s ease;
        }

        .btn-primary:hover {
            background: var(--secondary-green);
        }

        .plant-evolution-info {
            background: var(--light-green);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }

        .achievement-badge {
            background: var(--primary-green);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            display: inline-block;
            margin: 0.25rem;
        }
    </style>
</head>
<body>
    <!-- Daily Phrase Modal -->
    <div id="dailyPhraseModal" class="daily-phrase-modal" style="display: none;">
        <div class="daily-phrase-content">
            <button class="daily-phrase-close" onclick="closeDailyPhraseModal()">×</button>
            <div class="daily-phrase-icon">🌞</div>
            <h2 style="color: var(--dark-green); margin-bottom: 1rem;">Frase do Dia</h2>
            <div class="daily-phrase-text" id="dailyPhraseText"></div>
            <button class="daily-phrase-btn" onclick="closeDailyPhraseModal()">Continuar</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--dark-green);">🌱 Bem-vindo ao Mindful Garden</h2>
            <div class="form-group">
                <label for="username">Nome de usuário:</label>
                <input type="text" id="username" placeholder="Digite seu nome de usuário">
            </div>
            <div class="form-group">
                <label for="displayName">Nome para exibição:</label>
                <input type="text" id="displayName" placeholder="Como você gostaria de ser chamado?">
            </div>
            <button class="btn-primary" onclick="createUser()">Começar Jornada 🌿</button>
        </div>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    🌱 Mindful Garden
                </div>
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">🌿</div>
                    <div id="userName">Usuário</div>
                    <div style="font-size: 0.875rem; color: var(--gray);" id="userLevel">Nível 1 - Semente</div>
                </div>
            </div>

            <nav class="nav-menu">
                <div class="nav-item active" onclick="showPage('garden')">
                    🌱 Meu Jardim
                </div>
                <div class="nav-item" onclick="showPage('emergency')">
                    🆘 Contatos de Emergência
                </div>
                <div class="nav-item" onclick="showPage('community')">
                    👥 Comunidades
                </div>
                <div class="nav-item" onclick="showPage('personal-chat')">
                    💬 Chat Pessoal
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="top-bar">
                <button class="mobile-toggle" onclick="toggleSidebar()">☰</button>
                <div class="search-bar">
                    <span>🔍</span>
                    <input type="text" placeholder="Buscar comunidades, dicas...">
                </div>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span id="streakCounter">🔥 0 dias</span>
                    <button onclick="logout()" style="background: var(--gray); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">Sair</button>
                </div>
            </div>

            <div class="content-area">
                <!-- Garden Page -->
                <div id="garden" class="page active">
                    <div class="garden-grid">
                        <div class="card">
                            <div class="plant-container">
                                <div class="plant-stage" id="plantStage">🌱</div>
                                <h3 id="plantName">Sua Plantinha</h3>
                                <p id="plantDescription">Uma pequena semente cheia de potencial</p>
                                <div class="plant-evolution-info" id="evolutionInfo">
                                    <strong>Próxima Evolução:</strong> Regue 5 vezes
                                </div>
                                <div id="achievements"></div>
                            </div>
                        </div>

                        <div class="plant-info">
                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>💧 Hidratação</span>
                                    <span id="waterLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="waterBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>☀️ Energia</span>
                                    <span id="energyLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="energyBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>💚 Felicidade</span>
                                    <span id="happinessLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="happinessBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>🧠 Sabedoria</span>
                                    <span id="wisdomLevel">0%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="wisdomBar" style="width: 0%;"></div>
                                </div>
                            </div>

                            <div class="care-actions">
                                <button class="care-btn" onclick="careAction('water')">💧 Regar</button>
                                <button class="care-btn" onclick="careAction('sun')">☀️ Sol</button>
                                <button class="care-btn" onclick="careAction('music')">🎵 Música</button>
                                <button class="care-btn" onclick="careAction('meditation')">🧘 Meditar</button>
                                <button class="care-btn locked" onclick="careAction('fertilize')" id="fertilizeBtn">🌿 Fertilizar</button>
                                <button class="care-btn locked" onclick="careAction('prune')" id="pruneBtn">✂️ Podar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Emergency Contacts Page -->
                <div id="emergency" class="page">
                    <div class="card">
                        <h2 class="emergency-title">🆘 Contatos de Emergência</h2>
                        <p style="text-align: center; margin-bottom: 2rem;">Se você ou alguém que você conhece está em crise ou precisa de ajuda imediata, não hesite em contatar estes serviços:</p>

                        <div class="emergency-grid">
                            <div class="emergency-item">
                                <div class="emergency-name">CVV - Centro de Valorização da Vida</div>
                                <div class="emergency-phone">188</div>
                                <p>Atendimento 24h para prevenção do suicídio e apoio emocional.</p>
                            </div>

                            <div class="emergency-item">
                                <div class="emergency-name">SAMU - Serviço de Atendimento Móvel de Urgência</div>
                                <div class="emergency-phone">192</div>
                                <p>Atendimento médico de urgência 24 horas por dia.</p>
                            </div>

                            <div class="emergency-item">
                                <div class="emergency-name">Polícia Militar</div>
                                <div class="emergency-phone">190</div>
                                <p>Para situações de emergência que requerem intervenção policial.</p>
                            </div>

                            <div class="emergency-item">
                                <div class="emergency-name">Bombeiros</div>
                                <div class="emergency-phone">193</div>
                                <p>Para emergências que envolvam incêndios, resgates e acidentes.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Communities Page -->
                <div id="community" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Comunidades de Bem-Estar</h2>
                        </div>
                        <div class="communities-grid">
                            <div class="community-card" onclick="joinCommunity('anxiety')">
                                <div class="community-header">
                                    <div class="community-icon">🫂</div>
                                    <div>
                                        <h3>Ansiedade e Mindfulness</h3>
                                        <p>Apoio para quem lida com ansiedade</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>👥 1.2k membros</span>
                                    <span>💬 Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('growth')">
                                <div class="community-header">
                                    <div class="community-icon">🌱</div>
                                    <div>
                                        <h3>Crescimento Pessoal</h3>
                                        <p>Jornada de autodesenvolvimento</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>👥 856 membros</span>
                                    <span>💬 Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('meditation')">
                                <div class="community-header">
                                    <div class="community-icon">🧘</div>
                                    <div>
                                        <h3>Meditação Diária</h3>
                                        <p>Práticas de mindfulness</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>👥 2.1k membros</span>
                                    <span>💬 Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('wellness')">
                                <div class="community-header">
                                    <div class="community-icon">💚</div>
                                    <div>
                                        <h3>Bem-Estar Geral</h3>
                                        <p>Dicas de saúde mental e física</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>👥 3.4k membros</span>
                                    <span>💬 Ativo hoje</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Chat -->
                    <div class="card" id="communityChat" style="display: none;">
                        <div class="chat-container">
                            <div class="chat-header">
                                <span id="communityName">Comunidade</span>
                                <button onclick="leaveCommunity()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 4px; cursor: pointer;">Sair</button>
                            </div>
                            <div class="chat-messages" id="communityMessages"></div>
                            <div class="chat-input">
                                <input type="text" id="communityInput" placeholder="Compartilhe algo positivo..." onkeypress="handleCommunityKeyPress(event)">
                                <button class="send-btn" onclick="sendCommunityMessage()">Enviar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personal Chat Page -->
                <div id="personal-chat" class="page">
                    <div class="card">
                        <div class="chat-container">
                            <div class="chat-header">
                                <span>🤖 Assistente de Bem-Estar</span>
                            </div>
                            <div class="chat-messages" id="personalMessages">
                                <div class="message bot">
                                    Olá! Sou seu assistente pessoal de bem-estar. Como você está se sentindo hoje? 😊
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="personalInput" placeholder="Como você está se sentindo?" onkeypress="handlePersonalKeyPress(event)">
                                <button class="send-btn" onclick="sendPersonalMessage()">Enviar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Frases do dia
        const dailyPhrases = [
            "A calma é a força interior que nos permite enfrentar qualquer tempestade.",
            "Cada dia é uma nova oportunidade para crescer e florescer.",
            "A paz começa com um sorriso.",
            "Respire fundo. Tudo vai ficar bem.",
            "Você é mais forte do que pensa.",
            "A felicidade muitas vezes chega quando não estamos procurando por ela.",
            "Cultive gratidão e colha felicidade.",
            "A mente é como um jardim - o que você planta é o que colhe.",
            "Você não precisa ser perfeito, apenas presente.",
            "A jornada de mil milhas começa com um único passo.",
            "Seja gentil consigo mesmo hoje.",
            "A luz do sol é a melhor medicina.",
            "A vida é 10% o que acontece com você e 90% como você reage.",
            "A felicidade não é algo pronto. Ela vem de suas próprias ações.",
            "O momento presente é o único momento que realmente temos.",
            "A paz vem de dentro. Não a procure fora.",
            "Você é o artista da sua própria vida. Não dê o pincel para ninguém.",
            "A calma é a resposta para quase tudo.",
            "A respiração é a ponte entre a mente e o corpo.",
            "A gratidão transforma o que temos em suficiente.",
            "A mente tranquila é a base de uma vida feliz.",
            "Você é mais corajoso do que acredita, mais forte do que parece e mais inteligente do que pensa.",
            "A felicidade não é a ausência de problemas, mas a habilidade de lidar com eles.",
            "Cada manhã traz novas possibilidades.",
            "A paz interior começa no momento em que você escolhe não permitir que outra pessoa ou evento controle suas emoções.",
            "A vida é realmente simples, mas insistimos em torná-la complicada.",
            "A felicidade é quando o que você pensa, o que você diz e o que você faz estão em harmonia.",
            "Não se preocupe com o futuro. O futuro se preocupa consigo mesmo.",
            "A mente é tudo. Você se torna aquilo que pensa.",
            "A paz não pode ser mantida pela força. Ela só pode ser alcançada pelo entendimento.",
            "A felicidade depende de nós mesmos.",
            "A calma é a resposta para quase tudo na vida.",
            "A respiração é a âncora que nos mantém presentes.",
            "A gratidão é a memória do coração.",
            "A mente tranquila é o refúgio seguro de qualquer tempestade.",
            "Você é o céu. Tudo o mais é apenas o clima.",
            "A paz começa quando a expectativa termina.",
            "A felicidade não é uma estação para se chegar, mas uma maneira de viajar.",
            "A vida é realmente simples, mas nós insistimos em torná-la complicada.",
            "A calma é a força que nos permite enfrentar qualquer desafio.",
            "A respiração é a ponte entre o corpo e a mente.",
            "A gratidão transforma o comum em suficiente e o suficiente em abundância.",
            "A mente tranquila é a base de uma vida plena.",
            "Você é mais forte do que suas lutas e mais sábio do que seus erros.",
            "A felicidade não é algo que você adia para o futuro; é algo que você projeta para o presente.",
            "A paz interior começa quando você escolhe não permitir que outra pessoa ou evento controle suas emoções.",
            "A vida é 10% o que acontece com você e 90% como você reage a isso.",
            "A felicidade não é a ausência de problemas, mas a capacidade de lidar com eles.",
            "Cada manhã traz novas possibilidades e novas oportunidades para crescer.",
            "A paz interior é o caminho para uma vida plena e significativa."
        ];

        // Estado global da aplicação
        let currentUser = null;
        let plantState = {
            level: 1,
            water: 50,
            energy: 50,
            happiness: 50,
            wisdom: 0,
            stage: 'seed',
            evolution: {
                waterCount: 0,
                sunCount: 0,
                musicCount: 0,
                meditationCount: 0,
                fertilizeCount: 0,
                pruneCount: 0
            },
            unlockedActions: ['water', 'sun', 'music', 'meditation'],
            lastCared: Date.now(),
            streak: 0,
            achievements: []
        };

        const plantStages = {
            seed: { emoji: '🌱', name: 'Semente', description: 'Uma pequena semente cheia de potencial', unlocks: [] },
            sprout: { emoji: '🌿', name: 'Broto', description: 'Começando a crescer com cuidado', unlocks: ['fertilize'] },
            young: { emoji: '🌴', name: 'Planta Jovem', description: 'Crescendo forte e saudável', unlocks: ['prune'] },
            mature: { emoji: '🌳', name: 'Árvore Madura', description: 'Uma árvore sábia e forte', unlocks: [] },
        };

        // Funções da aplicação
        function createUser() {
            const username = document.getElementById('username').value;
            const displayName = document.getElementById('displayName').value;
            if (username && displayName) {
                currentUser = {
                    username,
                    displayName,
                    level: 1,
                    lastLogin: new Date()
                };
                document.getElementById('userName').textContent = displayName;
                document.getElementById('userAvatar').textContent = displayName.charAt(0);
                document.getElementById('loginModal').style.display = 'none';

                // Mostrar modal da frase do dia
                showDailyPhraseModal();

                updateStreak();
            } else {
                alert('Por favor, preencha todos os campos.');
            }
        }

        function showDailyPhraseModal() {
            const randomIndex = Math.floor(Math.random() * dailyPhrases.length);
            document.getElementById('dailyPhraseText').textContent = dailyPhrases[randomIndex];
            document.getElementById('dailyPhraseModal').style.display = 'flex';
        }

        function closeDailyPhraseModal() {
            document.getElementById('dailyPhraseModal').style.display = 'none';
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        function logout() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function careAction(action) {
    if (!plantState.unlockedActions.includes(action)) {
        alert('Esta ação ainda não está disponível. Continue cuidando da sua planta para desbloquear!');
        return;
    }

    switch (action) {
        case 'water':
            plantState.water = Math.min(100, plantState.water + 5); // Reduzido de 20 para 5
            plantState.evolution.waterCount++;
            break;
        case 'sun':
            plantState.energy = Math.min(100, plantState.energy + 5); // Reduzido de 20 para 5
            plantState.evolution.sunCount++;
            break;
        case 'music':
            plantState.happiness = Math.min(100, plantState.happiness + 5); // Reduzido de 20 para 5
            plantState.evolution.musicCount++;
            break;
        case 'meditation':
            plantState.wisdom = Math.min(100, plantState.wisdom + 5); // Reduzido de 20 para 5
            plantState.evolution.meditationCount++;
            break;
        case 'fertilize':
            plantState.water = Math.min(100, plantState.water + 3); // Reduzido de 10 para 3
            plantState.energy = Math.min(100, plantState.energy + 3); // Reduzido de 10 para 3
            plantState.happiness = Math.min(100, plantState.happiness + 3); // Reduzido de 10 para 3
            plantState.evolution.fertilizeCount++;
            break;
        case 'prune':
            plantState.wisdom = Math.min(100, plantState.wisdom + 10); // Reduzido de 30 para 10
            plantState.evolution.pruneCount++;
            break;
    }

    plantState.lastCared = Date.now();
    updatePlantState();
    checkEvolution();
    updateStreak();
}

        function updatePlantState() {
            document.getElementById('waterLevel').textContent = `${plantState.water}%`;
            document.getElementById('waterBar').style.width = `${plantState.water}%`;
            document.getElementById('energyLevel').textContent = `${plantState.energy}%`;
            document.getElementById('energyBar').style.width = `${plantState.energy}%`;
            document.getElementById('happinessLevel').textContent = `${plantState.happiness}%`;
            document.getElementById('happinessBar').style.width = `${plantState.happiness}%`;
            document.getElementById('wisdomLevel').textContent = `${plantState.wisdom}%`;
            document.getElementById('wisdomBar').style.width = `${plantState.wisdom}%`;

            // Atualize a imagem da planta
            const plantStageInfo = plantStages[plantState.stage];
            document.getElementById('plantStage').textContent = plantStageInfo.emoji;
            document.getElementById('plantName').textContent = plantStageInfo.name;
            document.getElementById('plantDescription').textContent = plantStageInfo.description;

            // Atualizar botões desbloqueados
            if (plantState.unlockedActions.includes('fertilize')) {
                document.getElementById('fertilizeBtn').classList.remove('locked');
            }
            if (plantState.unlockedActions.includes('prune')) {
                document.getElementById('pruneBtn').classList.remove('locked');
            }
        }

        function checkEvolution() {
    if (plantState.stage === 'seed' && plantState.evolution.waterCount >= 10) { // Aumentado de 5 para 10
        evolvePlant('sprout');
    } else if (plantState.stage === 'sprout' && plantState.evolution.waterCount >= 20) { // Aumentado de 10 para 20
        evolvePlant('young');
    } else if (plantState.stage === 'young' && plantState.evolution.waterCount >= 30) { // Aumentado de 15 para 30
        evolvePlant('mature');
    }
}

        if (plantState.stage === 'seed' && plantState.evolution.waterCount >= 10) { // Aumentado de 5 para 10
        evolvePlant('sprout');
    } else if (plantState.stage === 'sprout' && plantState.evolution.waterCount >= 20) { // Aumentado de 10 para 20
        evolvePlant('young');
    } else if (plantState.stage === 'young' && plantState.evolution.waterCount >= 30) { // Aumentado de 15 para 30
        evolvePlant('mature');
    }
}


        function evolvePlant(newStage) {
            plantState.stage = newStage;
            const stageInfo = plantStages[newStage];

            // Adicionar novas ações desbloqueadas
            stageInfo.unlocks.forEach(action => {
                if (!plantState.unlockedActions.includes(action)) {
                    plantState.unlockedActions.push(action);
                }
            });

            // Adicionar conquista
            plantState.achievements.push({
                id: `evolve-${newStage}`,
                name: `Evoluiu para ${stageInfo.name}`,
                date: new Date()
            });

            updatePlantState();
            updateAchievements();
            document.getElementById('evolutionInfo').textContent = getNextEvolutionInfo();
        }

        function getNextEvolutionInfo() {
    if (plantState.stage === 'seed') {
        return 'Próxima Evolução: Regue 10 vezes';
    } else if (plantState.stage === 'sprout') {
        return 'Próxima Evolução: Regue 20 vezes';
    } else if (plantState.stage === 'young') {
        return 'Próxima Evolução: Regue 30 vezes';
    } else if (plantState.stage === 'mature') {
        return 'Sua planta está totalmente desenvolvida!';
    } else {
        return 'Sua planta está totalmente desenvolvida!';
    }
}

            if (plantState.stage === 'seed') {
                return 'Próxima Evolução: Regue 5 vezes';
            } else if (plantState.stage === 'sprout') {
                return 'Próxima Evolução: Regue 10 vezes';
            } else if (plantState.stage === 'young') {
                return 'Próxima Evolução: Regue 15 vezes';
            } else if (plantState.stage === 'mature') {
                return 'Sua planta está totalmente desenvolvida!';
            } else {
                return 'Sua planta está totalmente desenvolvida!';
            }
        }

        function updateAchievements() {
            const achievementsContainer = document.getElementById('achievements');
            achievementsContainer.innerHTML = '';
            plantState.achievements.slice(-3).reverse().forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.textContent = achievement.name;
                achievementsContainer.appendChild(badge);
            });
        }

        function updateStreak() {
            const now = new Date();
            const lastCared = new Date(plantState.lastCared);
            const diffDays = Math.floor((now - lastCared) / (1000 * 60 * 60 * 24));

            if (diffDays === 0) {
                plantState.streak++;
            } else if (diffDays === 1) {
                plantState.streak = 1;
            } else {
                plantState.streak = 0;
            }

            document.getElementById('streakCounter').textContent = `🔥 ${plantState.streak} dias`;

            // Atualizar nível do usuário com base no streak
            currentUser.level = Math.floor(plantState.streak / 7) + 1;
            document.getElementById('userLevel').textContent = `Nível ${currentUser.level} - ${getLevelName(currentUser.level)}`;
        }

        function getLevelName(level) {
            const levels = [
                'Semente',
                'Broto',
                'Planta Jovem',
                'Árvore Madura',
                'Guardiã da Floresta',
                'Espírito da Natureza',
                'Deus da Jardim'
            ];
            return levels[Math.min(level - 1, levels.length - 1)];
        }

        function joinCommunity(community) {
            document.getElementById('communityChat').style.display = 'block';
            document.getElementById('communityName').textContent = getCommunityName(community);

            // Limpar mensagens anteriores
            document.getElementById('communityMessages').innerHTML = '';

            // Adicionar mensagem de boas-vindas
            const welcomeMessage = document.createElement('div');
            welcomeMessage.className = 'message bot';
            welcomeMessage.textContent = `Bem-vindo à comunidade ${getCommunityName(community)}! Compartilhe seus pensamentos e experiências.`;
            document.getElementById('communityMessages').appendChild(welcomeMessage);
        }

        function getCommunityName(community) {
            const communities = {
                'anxiety': 'Ansiedade e Mindfulness',
                'growth': 'Crescimento Pessoal',
                'meditation': 'Meditação Diária',
                'wellness': 'Bem-Estar Geral'
            };
            return communities[community] || 'Comunidade';
        }

        function leaveCommunity() {
            document.getElementById('communityChat').style.display = 'none';
        }

        function sendCommunityMessage() {
            const input = document.getElementById('communityInput');
            const message = input.value.trim();
            if (message) {
                const messageElement = document.createElement('div');
                messageElement.className = 'message user';
                messageElement.textContent = message;
                document.getElementById('communityMessages').appendChild(messageElement);
                input.value = '';

                // Simular resposta da comunidade
                setTimeout(() => {
                    const response = document.createElement('div');
                    response.className = 'message community';
                    const author = document.createElement('div');
                    author.className = 'message-author';
                    author.textContent = 'Membro da Comunidade';
                    response.appendChild(author);
                    response.appendChild(document.createTextNode(getCommunityResponse()));
                    document.getElementById('communityMessages').appendChild(response);
                }, 1000);
            }
        }

        function getCommunityResponse() {
            const responses = [
                "Obrigado por compartilhar! Isso realmente me ajudou a ver as coisas de uma perspectiva diferente.",
                "Eu me sinto da mesma maneira às vezes. Vamos continuar apoiando um ao outro!",
                "Que ótimo conselho! Vou tentar aplicar isso na minha vida diária.",
                "Isso é tão inspirador. Você tem um jeito maravilhoso com palavras.",
                "Eu passei por algo semelhante. Quer conversar mais sobre isso?",
                "Isso me lembrou de uma citação que amo: 'A calma é a força interior que nos permite enfrentar qualquer tempestade.'",
                "Você expressou exatamente como me sinto! Não sabia que outras pessoas também sentiam isso.",
                "Que bela reflexão. Vou guardar isso no meu diário de gratidão.",
                "Isso me deu uma nova perspectiva sobre a situação. Obrigado!",
                "Vamos marcar uma meditação em grupo amanhã? Acho que isso ajudaria todos nós."
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function handleCommunityKeyPress(event) {
            if (event.key === 'Enter') {
                sendCommunityMessage();
            }
        }

        function sendPersonalMessage() {
            const input = document.getElementById('personalInput');
            const message = input.value.trim();
            if (message) {
                const messageElement = document.createElement('div');
                messageElement.className = 'message user';
                messageElement.textContent = message;
                document.getElementById('personalMessages').appendChild(messageElement);
                input.value = '';

                // Simular resposta do assistente
                setTimeout(() => {
                    const response = document.createElement('div');
                    response.className = 'message bot';
                    response.textContent = getAssistantResponse(message);
                    document.getElementById('personalMessages').appendChild(response);
                }, 1000);
            }
        }

        function getAssistantResponse(message) {
            const responses = [
                "Entendo como você se sente. Vamos explorar isso juntos.",
                "Isso é completamente normal. Muitas pessoas passam por isso.",
                "Que tal tentarmos uma técnica de respiração para acalmar a mente?",
                "Você já considerou escrever sobre isso em um diário?",
                "Lembre-se de ser gentil consigo mesmo. Você está fazendo o melhor que pode.",
                "Vamos focar no presente. O que você está sentindo agora?",
                "Isso parece desafiador. Quais pequenos passos você pode dar hoje?",
                "Você não está sozinho nisso. Estou aqui para apoiá-lo.",
                "Que tal fazermos uma pausa para uma meditação rápida?",
                "Vamos refletir sobre algo pelo qual você é grato hoje."
            ];

            // Respostas mais específicas com base na mensagem
            if (message.toLowerCase().includes('ansioso') || message.toLowerCase().includes('ansiedade')) {
                return "A ansiedade pode ser avassaladora. Vamos tentar uma técnica de grounding: nomeie 5 coisas que você pode ver, 4 que pode tocar, 3 que pode ouvir, 2 que pode cheirar e 1 que pode provar.";
            } else if (message.toLowerCase().includes('triste')) {
                return "É importante reconhecer sua tristeza. Você pode tentar escrever sobre isso ou conversar com alguém de confiança. Às vezes, apenas expressar o que sentimos já alivia um pouco.";
            } else if (message.toLowerCase().includes('feliz')) {
                return "Que maravilhoso! Vamos celebrar esse momento. O que está trazendo essa felicidade para você hoje?";
            } else {
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        function handlePersonalKeyPress(event) {
            if (event.key === 'Enter') {
                sendPersonalMessage();
            }
        }

        document.getElementById('loginModal').style.display = 'flex';
        updatePlantState();
        updateAchievements();
        document.getElementById('evolutionInfo').textContent = getNextEvolutionInfo();
    </script>
</body>
</html>
