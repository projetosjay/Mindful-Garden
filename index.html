<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Garden</title>
    <style>
        /* Estilos CSS aqui (mantidos conforme o original) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #4ade80;
            --secondary-green: #22c55e;
            --light-green: #dcfce7;
            --dark-green: #16a34a;
            --accent-green: #86efac;
            --white: #ffffff;
            --light-gray: #f8fafc;
            --gray: #64748b;
            --dark-gray: #334155;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--light-green) 0%, var(--white) 100%);
            min-height: 100vh;
            color: var(--dark-gray);
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--white);
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid var(--light-green);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-green);
        }

        .user-profile {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--light-green);
            border-radius: 12px;
            text-align: center;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            background: var(--primary-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 0.5rem;
            color: white;
        }

        .nav-menu {
            flex: 1;
            padding: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.875rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .nav-item:hover {
            background: var(--light-green);
            transform: translateX(4px);
        }

        .nav-item.active {
            background: var(--primary-green);
            color: white;
        }

        .nav-item.active:hover {
            background: var(--secondary-green);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-bar {
            background: var(--white);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--light-gray);
            border-radius: 25px;
            padding: 0.5rem 1rem;
            gap: 0.5rem;
            flex: 1;
            max-width: 400px;
        }

        .search-bar input {
            border: none;
            background: none;
            outline: none;
            flex: 1;
            font-size: 0.875rem;
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            border: 1px solid var(--light-green);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--dark-green);
        }

        /* Garden Page */
        .garden-grid {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
        }

        .plant-container {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--light-green), rgba(255,255,255,0.5));
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .plant-stage {
            width: 200px;
            height: 200px;
            margin: 0 auto 1rem;
            background: var(--accent-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            transition: all 0.5s ease;
            box-shadow: var(--shadow-lg);
            position: relative;
        }

        .plant-stage::before {
            content: '';
            position: absolute;
            inset: -10px;
            background: conic-gradient(var(--primary-green), var(--secondary-green), var(--primary-green));
            border-radius: 50%;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .plant-stage.thriving::before {
            opacity: 1;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .plant-info {
            display: grid;
            gap: 1rem;
        }

        .plant-stat {
            background: var(--white);
            padding: 1rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .stat-bar {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-green), var(--secondary-green));
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .care-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .care-btn {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }

        .care-btn:hover {
            background: var(--secondary-green);
            transform: translateY(-2px);
        }

        .care-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        .care-btn.locked {
            background: var(--light-gray);
            color: var(--gray);
        }

        /* Fortune Page */
        .fortune-card {
            text-align: center;
            padding: 3rem 2rem;
        }

        .fortune-cookie {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, #deb887, #cd853f);
            border-radius: 50%;
            margin: 0 auto 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
        }

        .fortune-cookie:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .fortune-message {
            background: var(--light-green);
            padding: 2rem;
            border-radius: 16px;
            font-size: 1.1rem;
            line-height: 1.6;
            font-style: italic;
            margin-top: 2rem;
            border-left: 4px solid var(--primary-green);
        }

        /* Chat Pages */
        .chat-container {
            height: 60vh;
            display: flex;
            flex-direction: column;
            background: var(--light-gray);
            border-radius: 16px;
            overflow: hidden;
        }

        .chat-header {
            background: var(--primary-green);
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            max-width: 70%;
            padding: 0.75rem 1rem;
            border-radius: 16px;
            word-wrap: break-word;
        }

        .message.user {
            background: var(--primary-green);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .message.bot {
            background: var(--white);
            color: var(--dark-gray);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            box-shadow: var(--shadow);
        }

        .message.community {
            background: var(--accent-green);
            color: var(--dark-gray);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .message-author {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--secondary-green);
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            gap: 0.5rem;
            background: var(--white);
            border-top: 1px solid var(--light-green);
        }

        .chat-input input {
            flex: 1;
            background: var(--light-gray);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 1rem;
            outline: none;
            font-size: 0.875rem;
        }

        .send-btn {
            background: var(--primary-green);
            border: none;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            background: var(--secondary-green);
        }

        /* Communities */
        .communities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .community-card {
            background: var(--white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 2px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .community-card:hover {
            border-color: var(--primary-green);
            transform: translateY(-4px);
        }

        .community-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .community-icon {
            width: 50px;
            height: 50px;
            background: var(--primary-green);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .community-stats {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--gray);
        }

        /* Mobile Responsive */
        .mobile-toggle {
            display: none;
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
                z-index: 1000;
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-toggle {
                display: block;
            }

            .app-container {
                display: block;
            }

            .main-content {
                margin-left: 0;
            }

            .garden-grid {
                grid-template-columns: 1fr;
            }

            .communities-grid {
                grid-template-columns: 1fr;
            }

            .content-area {
                padding: 1rem;
            }

            .care-actions {
                grid-template-columns: 1fr;
            }
        }

        /* Login Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow-lg);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--light-green);
            border-radius: 8px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus {
            border-color: var(--primary-green);
        }

        .btn-primary {
            background: var(--primary-green);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
            transition: background 0.2s ease;
        }

        .btn-primary:hover {
            background: var(--secondary-green);
        }

        .plant-evolution-info {
            background: var(--light-green);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }

        .achievement-badge {
            background: var(--primary-green);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            display: inline-block;
            margin: 0.25rem;
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--dark-green);">üå± Bem-vindo ao Mindful Garden</h2>
            <div class="form-group">
                <label for="username">Nome de usu√°rio:</label>
                <input type="text" id="username" placeholder="Digite seu nome de usu√°rio">
            </div>
            <div class="form-group">
                <label for="displayName">Nome para exibi√ß√£o:</label>
                <input type="text" id="displayName" placeholder="Como voc√™ gostaria de ser chamado?">
            </div>
            <button class="btn-primary" onclick="createUser()">Come√ßar Jornada üåø</button>
        </div>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    üå± Mindful Garden
                </div>
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">üåø</div>
                    <div id="userName">Usu√°rio</div>
                    <div style="font-size: 0.875rem; color: var(--gray);" id="userLevel">N√≠vel 1 - Semente</div>
                </div>
            </div>

            <nav class="nav-menu">
                <div class="nav-item active" onclick="showPage('    ')">
                    üå± Meu Jardim
                </div>

                <div class="nav-item" onclick="showPage('community')">
                    üë• Comunidades
                </div>
                <div class="nav-item" onclick="showPage('personal-chat')">
                    üí¨ Chat Pessoal
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="top-bar">
                <button class="mobile-toggle" onclick="toggleSidebar()">‚ò∞</button>
                <div class="search-bar">
                    <span>üîç</span>
                    <input type="text" placeholder="Buscar comunidades, dicas...">
                </div>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <span id="streakCounter">üî• 0 dias</span>
                    <button onclick="logout()" style="background: var(--gray); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">Sair</button>
                </div>
            </div>

            <div class="content-area">
                <div id="garden" class="page active">
                    <div class="garden-grid">
                        <div class="card">
                            <div class="plant-container">
                                <div class="plant-stage" id="plantStage">üå±</div>
                                <h3 id="plantName">Sua Plantinha</h3>
                                <p id="plantDescription">Uma pequena semente cheia de potencial</p>
                                <div class="plant-evolution-info" id="evolutionInfo">
                                    <strong>Pr√≥xima Evolu√ß√£o:</strong> Regue 5 vezes
                                </div>
                                <div id="achievements"></div>
                            </div>
                        </div>

                        <div class="plant-info">
                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>üíß Hidrata√ß√£o</span>
                                    <span id="waterLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="waterBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>‚òÄÔ∏è Energia</span>
                                    <span id="energyLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="energyBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>üíö Felicidade</span>
                                    <span id="happinessLevel">50%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="happinessBar" style="width: 50%;"></div>
                                </div>
                            </div>

                            <div class="plant-stat">
                                <div class="stat-header">
                                    <span>üß† Sabedoria</span>
                                    <span id="wisdomLevel">0%</span>
                                </div>
                                <div class="stat-bar">
                                    <div class="stat-fill" id="wisdomBar" style="width: 0%;"></div>
                                </div>
                            </div>

                            <div class="care-actions">
                                <button class="care-btn" onclick="careAction('water')">üíß Regar</button>
                                <button class="care-btn" onclick="careAction('sun')">‚òÄÔ∏è Sol</button>
                                <button class="care-btn" onclick="careAction('music')">üéµ M√∫sica</button>
                                <button class="care-btn" onclick="careAction('meditation')">üßò Meditar</button>
                                <button class="care-btn locked" onclick="careAction('fertilize')" id="fertilizeBtn">üåø Fertilizar</button>
                                <button class="care-btn locked" onclick="careAction('prune')" id="pruneBtn">‚úÇÔ∏è Podar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fortune Page -->

                <!-- Communities Page -->
                <div id="community" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Comunidades de Bem-Estar</h2>
                        </div>
                        <div class="communities-grid">
                            <div class="community-card" onclick="joinCommunity('anxiety')">
                                <div class="community-header">
                                    <div class="community-icon">ü´Ç</div>
                                    <div>
                                        <h3>Ansiedade e Mindfulness</h3>
                                        <p>Apoio para quem lida com ansiedade</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>üë• 1.2k membros</span>
                                    <span>üí¨ Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('growth')">
                                <div class="community-header">
                                    <div class="community-icon">üå±</div>
                                    <div>
                                        <h3>Crescimento Pessoal</h3>
                                        <p>Jornada de autodesenvolvimento</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>üë• 856 membros</span>
                                    <span>üí¨ Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('meditation')">
                                <div class="community-header">
                                    <div class="community-icon">üßò</div>
                                    <div>
                                        <h3>Medita√ß√£o Di√°ria</h3>
                                        <p>Pr√°ticas de mindfulness</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>üë• 2.1k membros</span>
                                    <span>üí¨ Ativo hoje</span>
                                </div>
                            </div>

                            <div class="community-card" onclick="joinCommunity('wellness')">
                                <div class="community-header">
                                    <div class="community-icon">üíö</div>
                                    <div>
                                        <h3>Bem-Estar Geral</h3>
                                        <p>Dicas de sa√∫de mental e f√≠sica</p>
                                    </div>
                                </div>
                                <div class="community-stats">
                                    <span>üë• 3.4k membros</span>
                                    <span>üí¨ Ativo hoje</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Chat -->
                    <div class="card" id="communityChat" style="display: none;">
                        <div class="chat-container">
                            <div class="chat-header">
                                <span id="communityName">Comunidade</span>
                                <button onclick="leaveCommunity()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 4px; cursor: pointer;">Sair</button>
                            </div>
                            <div class="chat-messages" id="communityMessages"></div>
                            <div class="chat-input">
                                <input type="text" id="communityInput" placeholder="Compartilhe algo positivo..." onkeypress="handleCommunityKeyPress(event)">
                                <button class="send-btn" onclick="sendCommunityMessage()">Enviar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Personal Chat Page -->
                <div id="personal-chat" class="page">
                    <div class="card">
                        <div class="chat-container">
                            <div class="chat-header">
                                <span>ü§ñ Assistente de Bem-Estar</span>
                            </div>
                            <div class="chat-messages" id="personalMessages">
                                <div class="message bot">
                                    Ol√°! Sou seu assistente pessoal de bem-estar. Como voc√™ est√° se sentindo hoje? üòä
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="personalInput" placeholder="Como voc√™ est√° se sentindo?" onkeypress="handlePersonalKeyPress(event)">
                                <button class="send-btn" onclick="sendPersonalMessage()">Enviar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Estado global da aplica√ß√£o
        let currentUser = null;
        let plantState = {
            level: 1,
            water: 50,
            energy: 50,
            happiness: 50,
            wisdom: 0,
            stage: 'seed',
            evolution: {
                waterCount: 0,
                sunCount: 0,
                musicCount: 0,
                meditationCount: 0,
                fertilizeCount: 0,
                pruneCount: 0
            },
            unlockedActions: ['water', 'sun', 'music', 'meditation'],
            lastCared: Date.now(),
            streak: 0,
            achievements: []
        };

        const plantStages = {
            seed: { emoji: 'üå±', name: 'Semente', description: 'Uma pequena semente cheia de potencial', unlocks: [] },
            sprout: { emoji: 'üåø', name: 'Broto', description: 'Come√ßando a crescer com cuidado', unlocks: ['fertilize'] },
            young: { emoji: 'üå¥', name: 'Planta Jovem', description: 'Crescendo forte e saud√°vel', unlocks: ['prune'] },
            mature: { emoji: 'üå≥', name: '√Årvore Madura', description: 'Uma √°rvore s√°bia e forte', unlocks: [] },
        };

        // Fun√ß√µes da aplica√ß√£o
        function createUser() {
            const username = document.getElementById('username').value;
            const displayName = document.getElementById('displayName').value;
            if (username && displayName) {
                currentUser = {
                    username,
                    displayName,
                    level: 1,
                    lastLogin: new Date()
                };
                document.getElementById('userName').textContent = displayName;
                document.getElementById('userAvatar').textContent = displayName.charAt(0);
                document.getElementById('loginModal').style.display = 'none';
                updateStreak();
            } else {
                alert('Por favor, preencha todos os campos.');
            }
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        function logout() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function careAction(action) {
            if (!plantState.unlockedActions.includes(action)) {
                alert('Esta a√ß√£o ainda n√£o est√° dispon√≠vel. Continue cuidando da sua planta para desbloquear!');
                return;
            }
            switch (action) {
                case 'water':
                    plantState.water = Math.min(100, plantState.water + 20);
                    plantState.evolution.waterCount++;
                    break;
                case 'sun':
                    plantState.energy = Math.min(100, plantState.energy + 20);
                    plantState.evolution.sunCount++;
                    break;
                case 'music':
                    plantState.happiness = Math.min(100, plantState.happiness + 20);
                    plantState.evolution.musicCount++;
                    break;
                case 'meditation':
                    plantState.wisdom = Math.min(100, plantState.wisdom + 20);
                    plantState.evolution.meditationCount++;
                    break;
                case 'fertilize':
                    plantState.water = Math.min(100, plantState.water + 10);
                    plantState.energy = Math.min(100, plantState.energy + 10);
                    plantState.happiness = Math.min(100, plantState.happiness + 10);
                    plantState.evolution.fertilizeCount++;
                    break;
                case 'prune':
                    plantState.wisdom = Math.min(100, plantState.wisdom + 30);
                    plantState.evolution.pruneCount++;
                    break;
            }
            plantState.lastCared = Date.now();
            updatePlantState();
            checkEvolution();
            updateStreak();
        }

        function updatePlantState() {
            document.getElementById('waterLevel').textContent = `${plantState.water}%`;
            document.getElementById('waterBar').style.width = `${plantState.water}%`;
            document.getElementById('energyLevel').textContent = `${plantState.energy}%`;
            document.getElementById('energyBar').style.width = `${plantState.energy}%`;
            document.getElementById('happinessLevel').textContent = `${plantState.happiness}%`;
            document.getElementById('happinessBar').style.width = `${plantState.happiness}%`;
            document.getElementById('wisdomLevel').textContent = `${plantState.wisdom}%`;
            document.getElementById('wisdomBar').style.width = `${plantState.wisdom}%`;

            // Atualize a imagem da planta
            const plantStageInfo = plantStages[plantState.stage];
            document.getElementById('plantStage').textContent = plantStageInfo.emoji;
            document.getElementById('plantName').textContent = plantStageInfo.name;
            document.getElementById('plantDescription').textContent = plantStageInfo.description;

            // Atualizar bot√µes desbloqueados
            if (plantState.unlockedActions.includes('fertilize')) {
                document.getElementById('fertilizeBtn').classList.remove('locked');
            }
            if (plantState.unlockedActions.includes('prune')) {
                document.getElementById('pruneBtn').classList.remove('locked');
            }
        }

        function checkEvolution() {
            if (plantState.stage === 'seed' && plantState.evolution.waterCount >= 5) {
                evolvePlant('sprout');
            } else if (plantState.stage === 'sprout' && plantState.evolution.waterCount >= 10) {
                evolvePlant('young');
            } else if (plantState.stage === 'young' && plantState.evolution.waterCount >= 15) {
                evolvePlant('mature');
            }
        }

        function evolvePlant(newStage) {
            plantState.stage = newStage;
            const stageInfo = plantStages[newStage];

            // Adicionar novas a√ß√µes desbloqueadas
            stageInfo.unlocks.forEach(action => {
                if (!plantState.unlockedActions.includes(action)) {
                    plantState.unlockedActions.push(action);
                }
            });

            // Adicionar conquista
            plantState.achievements.push({
                id: `evolve-${newStage}`,
                name: `Evoluiu para ${stageInfo.name}`,
                date: new Date()
            });

            updatePlantState();
            updateAchievements();
            document.getElementById('evolutionInfo').textContent = getNextEvolutionInfo();
        }

        function getNextEvolutionInfo() {
            if (plantState.stage === 'seed') {
                return 'Pr√≥xima Evolu√ß√£o: Regue 5 vezes';
            } else if (plantState.stage === 'sprout') {
                return 'Pr√≥xima Evolu√ß√£o: Regue 10 vezes';
            } else if (plantState.stage === 'young') {
                return 'Pr√≥xima Evolu√ß√£o: Regue 15 vezes';
            } else if (plantState.stage === 'mature') {
                return 'Sua planta est√° totalmente desenvolvida!';
            } else {
                return 'Sua planta est√° totalmente desenvolvida!';
            }
        }

        function updateAchievements() {
            const achievementsContainer = document.getElementById('achievements');
            achievementsContainer.innerHTML = '';
            plantState.achievements.slice(-3).reverse().forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.textContent = achievement.name;
                achievementsContainer.appendChild(badge);
            });
        }

        function updateStreak() {
            const now = new Date();
            const lastCared = new Date(plantState.lastCared);
            const diffDays = Math.floor((now - lastCared) / (1000 * 60 * 60 * 24));

            if (diffDays === 0) {
                plantState.streak++;
            } else if (diffDays === 1) {
                plantState.streak = 1;
            } else {
                plantState.streak = 0;
            }

            document.getElementById('streakCounter').textContent = `üî• ${plantState.streak} dias`;

            // Atualizar n√≠vel do usu√°rio com base no streak
            currentUser.level = Math.floor(plantState.streak / 7) + 1;
            document.getElementById('userLevel').textContent = `N√≠vel ${currentUser.level} - ${getLevelName(currentUser.level)}`;
        }

        function getLevelName(level) {
            const levels = [
                'Semente',
                'Broto',
                'Planta Jovem',
                '√Årvore Madura',
                'Guardi√£ da Floresta',
                'Esp√≠rito da Natureza',
                'Deus da Jardim'
            ];
            return levels[Math.min(level - 1, levels.length - 1)];
        }


        function joinCommunity(community) {
            document.getElementById('communityChat').style.display = 'block';
            document.getElementById('communityName').textContent = getCommunityName(community);

            // Limpar mensagens anteriores
            document.getElementById('communityMessages').innerHTML = '';

            // Adicionar mensagem de boas-vindas
            const welcomeMessage = document.createElement('div');
            welcomeMessage.className = 'message bot';
            welcomeMessage.textContent = `Bem-vindo √† comunidade ${getCommunityName(community)}! Compartilhe seus pensamentos e experi√™ncias.`;
            document.getElementById('communityMessages').appendChild(welcomeMessage);
        }

        function getCommunityName(community) {
            const communities = {
                'anxiety': 'Ansiedade e Mindfulness',
                'growth': 'Crescimento Pessoal',
                'meditation': 'Medita√ß√£o Di√°ria',
                'wellness': 'Bem-Estar Geral'
            };
            return communities[community] || 'Comunidade';
        }

        function leaveCommunity() {
            document.getElementById('communityChat').style.display = 'none';
        }

        function sendCommunityMessage() {
            const input = document.getElementById('communityInput');
            const message = input.value.trim();
            if (message) {
                const messageElement = document.createElement('div');
                messageElement.className = 'message user';
                messageElement.textContent = message;
                document.getElementById('communityMessages').appendChild(messageElement);
                input.value = '';

                // Simular resposta da comunidade
                setTimeout(() => {
                    const response = document.createElement('div');
                    response.className = 'message community';
                    const author = document.createElement('div');
                    author.className = 'message-author';
                    author.textContent = 'Membro da Comunidade';
                    response.appendChild(author);
                    response.appendChild(document.createTextNode(getCommunityResponse()));
                    document.getElementById('communityMessages').appendChild(response);
                }, 1000);
            }
        }

        function getCommunityResponse() {
            const responses = [
                "Obrigado por compartilhar! Isso realmente me ajudou a ver as coisas de uma perspectiva diferente.",
                "Eu me sinto da mesma maneira √†s vezes. Vamos continuar apoiando um ao outro!",
                "Que √≥timo conselho! Vou tentar aplicar isso na minha vida di√°ria.",
                "Isso √© t√£o inspirador. Voc√™ tem um jeito maravilhoso com palavras.",
                "Eu passei por algo semelhante. Quer conversar mais sobre isso?",
                "Isso me lembrou de uma cita√ß√£o que amo: 'A calma √© a for√ßa interior que nos permite enfrentar qualquer tempestade.'",
                "Voc√™ expressou exatamente como me sinto! N√£o sabia que outras pessoas tamb√©m sentiam isso.",
                "Que bela reflex√£o. Vou guardar isso no meu di√°rio de gratid√£o.",
                "Isso me deu uma nova perspectiva sobre a situa√ß√£o. Obrigado!",
                "Vamos marcar uma medita√ß√£o em grupo amanh√£? Acho que isso ajudaria todos n√≥s."
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function handleCommunityKeyPress(event) {
            if (event.key === 'Enter') {
                sendCommunityMessage();
            }
        }

        function sendPersonalMessage() {
            const input = document.getElementById('personalInput');
            const message = input.value.trim();
            if (message) {
                const messageElement = document.createElement('div');
                messageElement.className = 'message user';
                messageElement.textContent = message;
                document.getElementById('personalMessages').appendChild(messageElement);
                input.value = '';

                // Simular resposta do assistente
                setTimeout(() => {
                    const response = document.createElement('div');
                    response.className = 'message bot';
                    response.textContent = getAssistantResponse(message);
                    document.getElementById('personalMessages').appendChild(response);
                }, 1000);
            }
        }

        function getAssistantResponse(message) {
            const responses = [
                "Entendo como voc√™ se sente. Vamos explorar isso juntos.",
                "Isso √© completamente normal. Muitas pessoas passam por isso.",
                "Que tal tentarmos uma t√©cnica de respira√ß√£o para acalmar a mente?",
                "Voc√™ j√° considerou escrever sobre isso em um di√°rio?",
                "Lembre-se de ser gentil consigo mesmo. Voc√™ est√° fazendo o melhor que pode.",
                "Vamos focar no presente. O que voc√™ est√° sentindo agora?",
                "Isso parece desafiador. Quais pequenos passos voc√™ pode dar hoje?",
                "Voc√™ n√£o est√° sozinho nisso. Estou aqui para apoi√°-lo.",
                "Que tal fazermos uma pausa para uma medita√ß√£o r√°pida?",
                "Vamos refletir sobre algo pelo qual voc√™ √© grato hoje."
            ];

            // Respostas mais espec√≠ficas com base na mensagem
            if (message.toLowerCase().includes('ansioso') || message.toLowerCase().includes('ansiedade')) {
                return "A ansiedade pode ser avassaladora. Vamos tentar uma t√©cnica de grounding: nomeie 5 coisas que voc√™ pode ver, 4 que pode tocar, 3 que pode ouvir, 2 que pode cheirar e 1 que pode provar.";
            } else if (message.toLowerCase().includes('triste')) {
                return "√â importante reconhecer sua tristeza. Voc√™ pode tentar escrever sobre isso ou conversar com algu√©m de confian√ßa. √Äs vezes, apenas expressar o que sentimos j√° alivia um pouco.";
            } else if (message.toLowerCase().includes('feliz')) {
                return "Que maravilhoso! Vamos celebrar esse momento. O que est√° trazendo essa felicidade para voc√™ hoje?";
            } else {
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        function handlePersonalKeyPress(event) {
            if (event.key === 'Enter') {
                sendPersonalMessage();
            }
        }

        document.getElementById('loginModal').style.display = 'flex';
        updatePlantState();
        updateAchievements();
        document.getElementById('evolutionInfo').textContent = getNextEvolutionInfo();
    </script>
</body>
</html>
